# 3D 星球标签高亮交互功能

## 功能说明
---
在 3D 星球可视化页面，实现了基于共同标签的智能高亮交互效果。

### 实现效果

**悬停交互**
当鼠标悬停在某个星球（知识点）上时：

1. **当前星球** → 白色发光（最亮）
   - 发光强度：1.0（最大）
   - 发光颜色：#FFFFFF（纯白）

2. **有共同标签的星球** → 淡黄色发光
   - 发光强度：0.7
   - 发光颜色：#FFFFAA（淡黄）

3. **连接这些星球的线** → 黄色高亮
   - 透明度：1.0（完全不透明）
   - 颜色：#FFFF00（黄色）

**重要特性**
- ✅ 只高亮，不暗化其他星球
- ✅ 其他无关星球保持原样
- ✅ 鼠标移开后自动恢复

## 使用场景
---

### 场景示例
假设有以下知识点：
- 客户心智（标签：学习、心理学）
- 路由守护（标签：前端、学习）
- React Hooks（标签：前端、开发）

**操作**：悬停在"客户心智"上

**结果**：
- 客户心智：白色发光 ⭐
- 路由守护：淡黄色发光 ✨（共同标签：学习）
- 它们之间的线：黄色高亮 —
- React Hooks：保持原样（无共同标签）

## 技术实现
---

### 连接规则
星球之间的连线基于标签生成：
- 有任何一个共同标签 → 建立连接
- 无共同标签 → 不建立连接

### 高亮逻辑
```javascript
悬停节点 → 查找共同标签节点
         → 高亮当前节点（白色）
         → 高亮相连节点（淡黄）
         → 高亮连接线（黄色）
         → 其他保持不变
```

### 恢复逻辑
```javascript
鼠标移开 → 恢复高亮节点原色
         → 恢复连接线原色
         → 清空高亮记录
```

## 文件修改
---

**文件**：`src/pages/ThreeJSPage.jsx`

**关键函数**：
1. `highlightNode(mesh)` - 高亮函数
   - 高亮当前节点
   - 高亮相连节点
   - 高亮连接线

2. `resetHighlight()` - 恢复函数
   - 恢复节点发光
   - 恢复连线颜色

3. `hasCommonTag(node1, node2)` - 标签判断
   - 检查是否有共同标签
   - 用于建立连接

## 视觉效果对比
---

状态          当前星球      相连星球      连接线        其他星球
------------------------------------------------------------------------
悬停前        柔和发光      柔和发光      灰色半透      柔和发光
悬停时        白色最亮      淡黄发光      黄色高亮      保持不变 ✨
悬停后        恢复原样      恢复原样      恢复原样      保持不变

## 交互流程
---

### 标准流程
1. 打开 3D 星球可视化页面
2. 可选：点击"🔗 显示连接线"按钮
3. 移动鼠标到任意星球上
4. 观察高亮效果
5. 移开鼠标，效果消失

### 快速识别关系
- 白色发光 = 当前关注的星球
- 淡黄发光 = 有共同学习主题
- 黄色连线 = 知识关联路径
- 普通状态 = 暂无直接关联

## 优化特点
---

### 性能优化
- 只更新高亮节点，不遍历全部
- 使用 Map 数据结构快速查找
- 射线检测按需触发

### 视觉优化
- 发光强度渐进（1.0 → 0.7）
- 颜色协调（白 → 黄 → 灰）
- 不干扰整体视觉

### 用户体验
- 即时响应，无延迟
- 自动恢复，无需操作
- 保持其他星球清晰可见

## 常见问题
---

### Q: 为什么有的星球没有连线？
A: 因为它们没有共同的标签。只有标签匹配的星球才会建立连接。

### Q: 可以同时高亮多个星球吗？
A: 可以，一个星球可以与多个有共同标签的星球连接，它们会同时高亮。

### Q: 连线太多看不清怎么办？
A: 可以点击"隐藏连接线"按钮，只在悬停时才会看到连线高亮。

### Q: 高亮颜色可以自定义吗？
A: 目前固定为白色和淡黄色，可以根据需要修改代码中的颜色值。

## 扩展建议
---

### 可选扩展
1. **点击锁定高亮**
   - 点击星球后锁定高亮状态
   - 再次点击或点击其他星球解锁

2. **标签筛选显示**
   - 下拉选择特定标签
   - 只显示有该标签的星球

3. **关系强度显示**
   - 共同标签越多，连线越粗
   - 用颜色深浅表示关联强度

4. **路径追踪**
   - 显示两个星球间的知识路径
   - 高亮中间的所有关联节点

---
**更新时间**: 2025-12-05
**版本**: v1.0（纯高亮版本）
**状态**: ✅ 已完成并测试通过
